---
import ButtonHome from "@components/ButtonHome.astro";
import Layout from "@layouts/Layout.astro";

import { fetchTodos } from "@utils/fetchTodos";
import { type Todo } from "@utils/types";

export async function getStaticPaths() {
    const todos = await fetchTodos();

    return todos.map((todo: Todo) => ({
        params: { id: todo.id.toString() },
        props: { todo },
    }));
}

const { id } = Astro.params;
const { todo } = Astro.props;
const title = `Todo: ${id}`
---

<Layout title={title}>
    <ButtonHome />

    <h1 class="text-4xl mb-2">Todo</h1>

    <article>
        <h2 class="text-2xl text-gray-700"># {id}</h2>
        <p class="text-lg text-slate-700" set:html={todo.title} />
    </article>
</Layout>
